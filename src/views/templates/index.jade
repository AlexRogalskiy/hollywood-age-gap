-
    actorsAndMovies = JSON.parse(actorsAndMovies);
    var movies = [];
    var actors = actorsAndMovies.actors;
    for (var i = 0; i < actorsAndMovies.movies.length; i++) {
        var movie = actorsAndMovies.movies[i];
        for (var j = 0; j < movie.relationships.length; j++) {
            var relationship = movie.relationships[j];
            var actor1 = actors[relationship[0]];
            var age1 = movie.year - new Date(actor1.born).getFullYear();
            var actor2 = actors[relationship[1]];
            var age2 = movie.year - new Date(actor2.born).getFullYear();
            var newMovie = {
                name: movie.name,
                difference: Math.abs(age1 - age2),
                relationship: [
                    {
                        age: age1,
                        gender: actor1.gender,
                        name: actor1.name
                    },
                    {
                        age: age2,
                        gender: actor2.gender,
                        name: actor2.name
                    }
                ],
                year: movie.year
            };
            movies.push(newMovie);
        }
    }
    movies.sort(function (a, b) {
        if (a.difference > b.difference) {
            return -1;
        } else if (a.difference < b.difference) {
            return 1;
        } else {
            return 0;
        }
    });

doctype html
html
    head
        meta(charset='utf-8')
        meta(http-equiv='X-UA-Compatible', content='IE=edge')
        meta(name='viewport', content='width=device-width, initial-scale=1')
        title Hollywood Age Gap
        meta(name='description', content='The age difference in years between movie love interests.')
        //script(src='app.js')
        link(rel='stylesheet', href='/app.css')
        script.
            (function(d) {
                var config = {
                            kitId: 'whf3jqc',
                            scriptTimeout: 3000,
                            async: true
                        },
                        h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
            })(document);
    body
        include ../../src/views/templates/SearchView.jade
        ul.cf.movie-list
            each movie in movies
                li.card
                    include ../../src/views/templates/MovieView.jade
            li.card.card-contribute
                include ../../src/views/templates/ContributeItemView.jade
